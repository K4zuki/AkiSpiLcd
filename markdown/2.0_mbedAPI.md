# mbed(TM) 向けライブラリ

この章ではmbed向けに用意したライブラリの解説をしていきます。
基本的に前章で解説した各コマンドをそのまま実装しただけです。
前述の擬似DMAを行う関数も用意してあります。

## コンストラクタ
AkiSpiLcd(PinName mosi, PinName miso, PinName sck, PinName csl, PinName csr)

### 引数
* `mosi` マスタとしてSPIデータを送出するピン
* `miso` スレーブからのSPIデータを受け取るピン
* `sck` SPIクロック出力ピン
* `csl` 液晶選択ピン（Hアクティブ）
* `csr` SRAM選択ピン（Lアクティブ）

## 液晶直接アクセス関数

### `void cls()`
* 画素メモリ全消し


### `void cls_ram(int screen)`
* SRAM内のデータを1画面分全消し
    * `screen` スクリーン番号(0 または 1)

### `void directUpdateSingle(int line, uint8_t *data)`
* 単一ライン書込み(400ビット = 50バイト)
    * `line` ライン番号 (1-240)
    * `*data` データへのポインタ

### `void directUpdateMulti(int startline, int length, uint8_t *data)`
* 複数ライン書込み(400 x N ビット = 50 x N バイト)
    * `line` ライン番号(1-240)
    * `length` 書込みライン数
    * `*data` データへのポインタ

### `void cominvert()`
* COM信号を反転

## SRAM操作関数群
### `void ramReadSingleLine(int line, uint8_t *buffer, int screen)`
* `screen`から`buffer`に単一ライン読み込み(400 ビット = 50 バイト)
    * `line` ライン番号(1-240)
    * `*buffer` バッファへのポインタ(50 bytes)
    * `screen` 読出し元のスクリーン番号(0 or 1)

### `void ramReadMultiLine(int startline, int length, uint8_t *buffer, int screen)`
* `screen`から`buffer`に複数ライン読み込み(400 x N ビット = 50 x N バイト)
    * `startline` 開始ライン番号(1-240)
    * `length` 読出しライン数
    * `*buffer` バッファへのポインタ
    * `screen` 読出し元のスクリーン番号(0 or 1)

### `void ramWriteSingleLine(int line, uint8_t *data, int screen)`
* スクリーンに単一ライン書込み(400 ビット = 50 バイト)
    * `line` ライン番号(1-240)
    * `*data` 書込みデータへのポインタ(50 バイト)
    * `screen` 書込み先スクリーン番号(0 or 1)

### `void ramWriteMultiLine(int startline, int length, uint8_t *data, int screen)`
* スクリーンに複数ライン書込み(400 x N ビット = 50 x N バイト)
    * `startline` 開始ライン番号(1-240)
    * `length` 書込みライン数
    * `*data` 書込みデータへのポインタ
    * `screen` 書込み先スクリーン番号(0 or 1)

### `void ram2lcd(int startline, int length, int screen)`
* **なんちゃってDMA関数** - スクリーン内部データを複数ラインぶん液晶に転送する
    * `startline` 開始ライン番号(1-240)
    * `length` 書込みライン数
    * `screen` 書込み元スクリーン番号(0 or 1)

### `void ram2lcd(int screen)`
* **なんちゃってDMA関数** - スクリーン内部データを液晶に転送する
    * `screen` 書込み元スクリーン番号(0 or 1)

<!--
read a byte from SRAM (copied from Ser23K256)
    * address    The address to read from
    * the character at that address

    uint8_t ram_read(int address)

    read multiple bytes from SRAM into a buffer (copied from Ser23K256)
    * address    The SRAM address to read from
    * buffer     The buffer to read into (must be big enough!)
    * count      The number of bytes to read

    void ram_read(int address, uint8_t *buffer, int count)

    write a byte to SRAM (copied from Ser23K256)
    * address    The SRAM address to write to
    * byte       The byte to write there

    void ram_write(int address, uint8_t byte)

    write multiple bytes to SRAM from a buffer (copied from Ser23K256)
    * address    The SRAM address write to
    * buffer     The buffer to write from
    * count      The number of bytes to write

    void ram_write(int address, uint8_t *buffer, int count)
-->

## SRAMアクセス関数
## 擬似DMA関数
